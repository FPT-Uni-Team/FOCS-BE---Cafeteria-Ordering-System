FROM mcr.microsoft.com/dotnet/sdk:8.0 AS build

WORKDIR /src

# Copy solution and all projects
COPY FOCS.sln ./
COPY FOCS/ FOCS/
COPY FOCS.Application/ FOCS.Application/
COPY FOCS.Common/ FOCS.Common/
COPY FOCS.Infrastructure.Identity/ FOCS.Infrastructure.Identity/
# copy other referenced projects similarly

# Restore dependencies (runs dotnet restore on the solution)
RUN dotnet restore

# Publish main project
WORKDIR /src/FOCS
RUN dotnet publish -c Release -o /out

# Then your runtime image stage follows...
